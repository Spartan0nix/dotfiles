---
- name: Install default packages
  package:
    name:
      - git
      - jq
      - curl
    state: latest
  become: true

- name: Get current Distro
  shell: |
    distro=$(lsb_release -si)
    echo $distro
  register: current_distro

- name: Set CURRENT_DISTRO fact
  set_fact:
    CURRENT_DISTRO: "{{ current_distro.stdout }}"

- include: setup_wsl.yml
  when: lookup('env', 'WSL_DISTRO_NAME') != ""

- name: Build ansible library path
  shell: |
    CURRENT_PATH=$(pwd)
    echo "$CURRENT_PATH/library"
  register: ansible_library

- name: Set ANSIBLE_LIBRARY fact
  set_fact:
    ANSIBLE_LIBRARY: "{{ ansible_library.stdout }}"

- include: setup_path.yml
